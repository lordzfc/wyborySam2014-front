"use strict";angular.module("wyborySam2014",["nvd3","smart-table","ui.router","ui.bootstrap","wyborySam2014.area","wyborySam2014.charts","wyborySam2014.tables","wyborySam2014.utils","wyborySam2014.http"]).constant("DEV_API_PREFIX","http://localhost:8081/api/"),angular.module("wyborySam2014").config(["$stateProvider",function(t){t.state("stats-app",{url:"/app/{dataUrl}",controller:"wyborySam2014.area.ctrl",templateUrl:"area/area.ctrl.html"})}]),angular.module("wyborySam2014.area",[]),angular.module("wyborySam2014.area").controller("wyborySam2014.area.ctrl",["$scope","$rootScope","$http","$stateParams","httpService","urls",function(t,a,e,r,n,o){var i=function(a){var e=a.filter(function(a){return a.type===t.electionKind.type})[0];return e},l=function(a,e){n.getStatsData(a).success(function(r){t.stats=r,t.siteName=e,o.changeDataUrl(a,t.dataUrl,"stats")})};t.chartData={key:"",values:[]},t.dataUrl=r.dataUrl,n.getAreasTree().success(function(a){t.tree=a;var e=o.decode(r.dataUrl),n=o.getSiteName(e);t.electionKind=o.getElectionKind(a,e),t.navTree=i(a),l(e,n)}),t.$watch("electionKind",function(e,r){e!==r&&void 0!==r&&(t.navTree=i(t.tree),a.$broadcast("area::electionTypeChange"),l(t.electionKind.url,"Warszawa"))});var c=a.$on("area::areaTypeChange",function(t,a,e){l(a,e)});t.$on("$destroy",c),t.menuIsVisible=function(){return t.openMenu===!1||t.openMenu===!0},t.menuIsOff=function(){return t.openMenu===!1},t.dropdownIsOff=function(){return t.electionKindsDropwn===!1},t.dropdownIsVisible=function(){return t.electionKindsDropwn===!1||t.electionKindsDropwn===!0},t.changeElectionKind=function(a){t.dataUrl=a.url,t.electionKind={name:a.name,type:a.type,url:a.url},n.getStatsData(a.url).success(function(a){t.statsData=a}),o.changeDataUrl(a.url,"stats"),t.electionKindsDropwn=!1}}]),angular.module("wyborySam2014.charts",[]),angular.module("wyborySam2014.http",[]),angular.module("wyborySam2014.http").factory("httpService",["$http","DEV_API_PREFIX",function(t,a){var e={};return e.getAreasTree=function(){return t.get(a+"stats/areas-tree/")},e.getStatsData=function(e){return t.get(a+e)},e}]),angular.module("wyborySam2014.tables",[]),angular.module("wyborySam2014.utils",[]),angular.module("wyborySam2014.utils").factory("urls",["$location",function(t){var a={};return a.code=function(t){return t.replace(/\//g,".")},a.decode=function(t){return t.replace(/\./g,"/")},a.getSiteName=function(t,a){if(t)var e=t.split(a||"/"),r=e[e.length-2].split("-");return t&&"circle"===r[0]?"Okręg nr "+r[1]:t&&"circuit"===r[0]?"Obwód nr "+r[1]:t&&"district"===r[0]?r[1]:"Warszawa"},a.getElectionKind=function(t,a,e){if(!a||!t)return{name:"Wybory do Rady Miasta",type:"city_council",url:"stats/city_council/"};var r=a.split(e||"/")[1],n=t.filter(function(t){return t.type===r})[0];return{name:n.name,type:n.type,url:n.url}},a.changeDataUrl=function(e,r,n){var o=t.path().split("/");o.pop(),o.push(a.code(e)),t.path(o.join("/"))},a}]),angular.module("wyborySam2014.area").directive("mainCity",["$rootScope",function(t){return{scope:{election:"="},restrict:"E",templateUrl:"area/tree/main-city.dir.html",link:function(a,e,r,n){a.deactivateAllBranches=function(a,e){a.stopPropagation(),t.$broadcast("tree.city::deactivateAllBranches")},a.changeArea=function(a,e){a.stopPropagation(),t.$broadcast("area::areaTypeChange",e.url,e.name)}}}}]),angular.module("wyborySam2014.area").directive("areasTree",["$rootScope",function(t){return{scope:{tree:"="},restrict:"E",templateUrl:"area/tree/tree.dir.html",link:function(a,e,r,n){a.active=-1,a.activateDeactivate=function(t,e){return t.stopPropagation(),-1===a.active?void(a.active=e):void(a.active=-1)};var o=t.$on("area::electionTypeChange",function(){a.active=-1});a.$on("$destroy",o);var i=t.$on("tree.city::deactivateAllBranches",function(){a.active=-1});a.$on("$destroy",i),a.changeArea=function(a,e){a.stopPropagation(),t.$broadcast("area::areaTypeChange",e.url,e.name)}}}}]),angular.module("wyborySam2014.charts").controller("wyborySam2014.charts.mainCtrl",["$scope",function(t){t.options={chart:{type:"discreteBarChart",height:400,margin:{top:20,right:40,bottom:50,left:55},x:function(t){return t.label},y:function(t){return t.value},showValues:!1,valueFormat:function(t){return d3.format(",.2f%")(t)},duration:500,xAxis:{},yAxis:{axisLabelDistance:0}}}}]),angular.module("wyborySam2014.charts").directive("chartsView",[function(){return{scope:{data:"="},controller:"wyborySam2014.charts.mainCtrl",restrict:"E",templateUrl:"charts/main/charts.dir.html",link:function(t,a,e,r){t.chartData=[{key:"Cumulative Return",values:[]}],t.$watch("data",function(a,e){a!==e&&(t.chartData[0].values=_.map(a.votes,function(t){return{value:t.percentage,label:t.political_party}}),t.chartData[0].values.sort(function(t,a){return a.value-t.value}))})}}}]),angular.module("wyborySam2014.tables").controller("wyborySam2014.tables.mainCtrl",["$scope",function(t){t.rowCollection=[{firstName:"Laurent",lastName:"Renard",birthDate:new Date("1987-05-21"),balance:102,email:"whatever@gmail.com"},{firstName:"Blandine",lastName:"Faivre",birthDate:new Date("1987-04-25"),balance:-2323.22,email:"oufblandou@gmail.com"},{firstName:"Francoise",lastName:"Frere",birthDate:new Date("1955-08-27"),balance:42343,email:"raymondef@gmail.com"}]}]),angular.module("wyborySam2014.tables").directive("tablesView",[function(){return{scope:{stats:"=",electionKind:"="},controller:"wyborySam2014.tables.mainCtrl",restrict:"E",templateUrl:"tables/main/tables.dir.html",link:function(t,a,e,r){}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9zb3VyY2UvYXBwLmpzIiwiL3NvdXJjZS9jb25maWcuanMiLCIvc291cmNlL2FyZWEvX2RlZmluaXRpb24uanMiLCIvc291cmNlL2FyZWEvYXJlYS5jdHJsLmpzIiwiL3NvdXJjZS9jaGFydHMvX2RlZmluaXRpb24uanMiLCIvc291cmNlL2h0dHBfc2VydmljZXMvX2RlZmluaXRpb24uanMiLCIvc291cmNlL2h0dHBfc2VydmljZXMvaHR0cC5mYWN0LmpzIiwiL3NvdXJjZS90YWJsZXMvX2RlZmluaXRpb24uanMiLCIvc291cmNlL3V0aWxzL19kZWZpbml0aW9uLmpzIiwiL3NvdXJjZS91dGlscy9kYXRhLXVybHMuZmFjdC5qcyIsIi9zb3VyY2UvYXJlYS90cmVlL21haW4tY2l0eS5kaXIuanMiLCIvc291cmNlL2FyZWEvdHJlZS90cmVlLmRpci5qcyIsIi9zb3VyY2UvY2hhcnRzL21haW4vY2hhcnRzLmN0cmwuanMiLCIvc291cmNlL2NoYXJ0cy9tYWluL2NoYXJ0cy5kaXIuanMiLCIvc291cmNlL3RhYmxlcy9tYWluL3RhYmxlcy5jdHJsLmpzIiwiL3NvdXJjZS90YWJsZXMvbWFpbi90YWJsZXMuZGlyLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25zdGFudCIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwic3RhdGUiLCJ1cmwiLCJjb250cm9sbGVyIiwidGVtcGxhdGVVcmwiLCIkc2NvcGUiLCIkcm9vdFNjb3BlIiwiJGh0dHAiLCIkc3RhdGVQYXJhbXMiLCJodHRwU2VydmljZSIsInVybHMiLCJnZXROYXZUcmVlIiwidHJlZSIsIm9uZVRyZWUiLCJmaWx0ZXIiLCJvYmoiLCJ0eXBlIiwiZWxlY3Rpb25LaW5kIiwiZ2V0RGF0YSIsIm5hbWUiLCJnZXRTdGF0c0RhdGEiLCJzdWNjZXNzIiwic3RhdHMiLCJzaXRlTmFtZSIsImNoYW5nZURhdGFVcmwiLCJkYXRhVXJsIiwiY2hhcnREYXRhIiwia2V5IiwidmFsdWVzIiwiZ2V0QXJlYXNUcmVlIiwiZGVjb2RlIiwiZ2V0U2l0ZU5hbWUiLCJnZXRFbGVjdGlvbktpbmQiLCJuYXZUcmVlIiwiJHdhdGNoIiwidmFsIiwib2xkVmFsIiwidW5kZWZpbmVkIiwiJGJyb2FkY2FzdCIsImRlcyIsIiRvbiIsImUiLCJtZW51SXNWaXNpYmxlIiwib3Blbk1lbnUiLCJtZW51SXNPZmYiLCJkcm9wZG93bklzT2ZmIiwiZWxlY3Rpb25LaW5kc0Ryb3B3biIsImRyb3Bkb3duSXNWaXNpYmxlIiwiY2hhbmdlRWxlY3Rpb25LaW5kIiwia2luZCIsImRhdGEiLCJzdGF0c0RhdGEiLCJmYWN0b3J5IiwiREVWX0FQSV9QUkVGSVgiLCJzZWxmIiwiZ2V0IiwiJGxvY2F0aW9uIiwiY29kZSIsInJlcGxhY2UiLCJzcGxpdFVybFBhcmFtIiwidXJsc0FyciIsInNwbGl0IiwiZGF0YVR5cGUiLCJsZW5ndGgiLCJub2RlIiwiU3RhdGVQYXJhbURhdGFVcmwiLCJzaXRlVHlwZSIsInBhdGgiLCJwb3AiLCJwdXNoIiwiam9pbiIsImRpcmVjdGl2ZSIsInNjb3BlIiwiZWxlY3Rpb24iLCJyZXN0cmljdCIsImxpbmsiLCJpRWxtIiwiaUF0dHJzIiwiZGVhY3RpdmF0ZUFsbEJyYW5jaGVzIiwiZXZlbnQiLCJlbGVtZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwiY2hhbmdlQXJlYSIsImFjdGl2ZSIsImFjdGl2YXRlRGVhY3RpdmF0ZSIsImluZGV4IiwiZGVzMSIsIm9wdGlvbnMiLCJjaGFydCIsImhlaWdodCIsIm1hcmdpbiIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCIsIngiLCJkIiwibGFiZWwiLCJ5IiwidmFsdWUiLCJzaG93VmFsdWVzIiwidmFsdWVGb3JtYXQiLCJkMyIsImZvcm1hdCIsImR1cmF0aW9uIiwieEF4aXMiLCJ5QXhpcyIsImF4aXNMYWJlbERpc3RhbmNlIiwiXyIsIm1hcCIsInZvdGVzIiwidiIsInBlcmNlbnRhZ2UiLCJwb2xpdGljYWxfcGFydHkiLCJzb3J0IiwiYSIsImIiLCJyb3dDb2xsZWN0aW9uIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJiaXJ0aERhdGUiLCJEYXRlIiwiYmFsYW5jZSIsImVtYWlsIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUNBQSxTQUFBQyxPQUFBLGlCQUNBLE9BQ0EsY0FDQSxZQUNBLGVBQ0EscUJBQ0EsdUJBQ0EsdUJBQ0Esc0JBQ0EsdUJBRUFDLFNBQUEsaUJBQUEsOEJDWkFGLFFBQUFDLE9BQUEsaUJBQ0FFLFFBQUEsaUJBQUEsU0FBQUMsR0FDQUEsRUFDQUMsTUFBQSxhQUNBQyxJQUFBLGlCQUNBQyxXQUFBLDBCQUNBQyxZQUFBLDJCQ0xBUixRQUFBQyxPQUFBLHlCQ0RBRCxRQUFBQyxPQUFBLHNCQUNBTSxXQUFBLDJCQUFBLFNBQUEsYUFBQSxRQUFBLGVBQUEsY0FBQSxPQUNBLFNBQUFFLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUFELEVBQUFFLE9BQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBQyxPQUFBWCxFQUFBWSxhQUFBRCxPQUNBLEVBQ0EsT0FBQUgsSUFHQUssRUFBQSxTQUFBaEIsRUFBQWlCLEdBQ0FWLEVBQUFXLGFBQUFsQixHQUFBbUIsUUFBQSxTQUFBQyxHQUNBakIsRUFBQWlCLE1BQUFBLEVBQ0FqQixFQUFBa0IsU0FBQUosRUFDQVQsRUFBQWMsY0FBQXRCLEVBQUFHLEVBQUFvQixRQUFBLFdBSUFwQixHQUFBcUIsV0FBQUMsSUFBQSxHQUFBQyxXQUNBdkIsRUFBQW9CLFFBQUFqQixFQUFBaUIsUUFFQWhCLEVBQUFvQixlQUFBUixRQUFBLFNBQUFULEdBQ0FQLEVBQUFPLEtBQUFBLENBRUEsSUFBQVYsR0FBQVEsRUFBQW9CLE9BQUF0QixFQUFBaUIsU0FDQU4sRUFBQVQsRUFBQXFCLFlBQUE3QixFQUVBRyxHQUFBWSxhQUFBUCxFQUFBc0IsZ0JBQUFwQixFQUFBVixHQUNBRyxFQUFBNEIsUUFBQXRCLEVBQUFDLEdBQ0FNLEVBQUFoQixFQUFBaUIsS0FHQWQsRUFBQTZCLE9B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QUwsYUFBQSxLQUVBZCxXQUFBLGdDQUNBdUUsU0FBQSxJQUNBdEUsWUFBQSw4QkFDQXVFLEtBQUEsU0FBQUgsRUFBQUksRUFBQUMsRUFBQTFFIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5hbmd1bGFyLm1vZHVsZSgnd3lib3J5U2FtMjAxNCcsIFtcbiAgJ252ZDMnLFxuICAnc21hcnQtdGFibGUnLFxuICAndWkucm91dGVyJyxcbiAgJ3VpLmJvb3RzdHJhcCcsXG4gICd3eWJvcnlTYW0yMDE0LmFyZWEnLFxuICAnd3lib3J5U2FtMjAxNC5jaGFydHMnLFxuICAnd3lib3J5U2FtMjAxNC50YWJsZXMnLFxuICAnd3lib3J5U2FtMjAxNC51dGlscycsXG4gICd3eWJvcnlTYW0yMDE0Lmh0dHAnXG4gIF0pXG4uY29uc3RhbnQoJ0RFVl9BUElfUFJFRklYJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9hcGkvJyk7IiwiYW5ndWxhci5tb2R1bGUoJ3d5Ym9yeVNhbTIwMTQnKVxuLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIpIHtcbiAgJHN0YXRlUHJvdmlkZXJcbiAgLnN0YXRlKCdzdGF0cy1hcHAnLCB7XG4gICAgdXJsOiAnL2FwcC97ZGF0YVVybH0nLFxuICAgIGNvbnRyb2xsZXI6ICd3eWJvcnlTYW0yMDE0LmFyZWEuY3RybCcsXG4gICAgdGVtcGxhdGVVcmw6ICdhcmVhL2FyZWEuY3RybC5odG1sJ1xuICB9KVxufV0pIiwiJ3VzZSBzdHJpY3QnO1xuYW5ndWxhci5tb2R1bGUoJ3d5Ym9yeVNhbTIwMTQuYXJlYScsIFtdKSIsImFuZ3VsYXIubW9kdWxlKCd3eWJvcnlTYW0yMDE0LmFyZWEnKVxuLmNvbnRyb2xsZXIoJ3d5Ym9yeVNhbTIwMTQuYXJlYS5jdHJsJywgWyckc2NvcGUnLCAnJHJvb3RTY29wZScsICckaHR0cCcsICckc3RhdGVQYXJhbXMnLCAnaHR0cFNlcnZpY2UnLCAndXJscycsXG4gIGZ1bmN0aW9uKCRzY29wZSwgJHJvb3RTY29wZSwgJGh0dHAsICRzdGF0ZVBhcmFtcywgaHR0cFNlcnZpY2UsIHVybHMpe1xuICB2YXIgZ2V0TmF2VHJlZSA9IGZ1bmN0aW9uKHRyZWUpIHtcbiAgICB2YXIgb25lVHJlZSA9IHRyZWUuZmlsdGVyKGZ1bmN0aW9uKG9iail7XG4gICAgICByZXR1cm4gb2JqLnR5cGUgPT09ICRzY29wZS5lbGVjdGlvbktpbmQudHlwZTtcbiAgICB9KVswXTtcbiAgICByZXR1cm4gb25lVHJlZTtcbiAgfTtcblxuICB2YXIgZ2V0RGF0YSA9IGZ1bmN0aW9uICh1cmwsIG5hbWUpIHtcbiAgICBodHRwU2VydmljZS5nZXRTdGF0c0RhdGEodXJsKS5zdWNjZXNzKGZ1bmN0aW9uKHN0YXRzKXtcbiAgICAgICRzY29wZS5zdGF0cyA9IHN0YXRzO1xuICAgICAgJHNjb3BlLnNpdGVOYW1lID0gbmFtZTtcbiAgICAgIHVybHMuY2hhbmdlRGF0YVVybCh1cmwsICRzY29wZS5kYXRhVXJsLCAnc3RhdHMnKTtcbiAgICB9KVxuICB9O1xuXG4gICRzY29wZS5jaGFydERhdGEgPSB7a2V5OiAnJywgdmFsdWVzOiBbXX07XG4gICRzY29wZS5kYXRhVXJsID0gJHN0YXRlUGFyYW1zLmRhdGFVcmw7XG5cbiAgaHR0cFNlcnZpY2UuZ2V0QXJlYXNUcmVlKCkuc3VjY2VzcyhmdW5jdGlvbih0cmVlKSB7XG4gICAgJHNjb3BlLnRyZWUgPSB0cmVlO1xuICAgIFxuICAgIHZhciB1cmwgPSB1cmxzLmRlY29kZSgkc3RhdGVQYXJhbXMuZGF0YVVybCk7XG4gICAgdmFyIG5hbWUgPSB1cmxzLmdldFNpdGVOYW1lKHVybCk7XG4gICAgLy8gY29uc29sZS5sb2coKTtcbiAgICAkc2NvcGUuZWxlY3Rpb25LaW5kID0gdXJscy5nZXRFbGVjdGlvbktpbmQodHJlZSwgdXJsKTtcbiAgICAkc2NvcGUubmF2VHJlZSA9IGdldE5hdlRyZWUodHJlZSk7XG4gICAgZ2V0RGF0YSh1cmwsIG5hbWUpO1xuICB9KTtcblxuICAkc2NvcGUuJHdhdGNoKCdlbGVjdGlvbktpbmQnLCBmdW5jdGlvbih2YWwsIG9sZFZhbCkge1xuICAgIGlmKHZhbCAhPT0gb2xkVmFsICYmIG9sZFZhbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAkc2NvcGUubmF2VHJlZSA9IGdldE5hdlRyZWUoJHNjb3BlLnRyZWUpO1xuICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdhcmVhOjplbGVjdGlvblR5cGVDaGFuZ2UnKTtcbiAgICAgIGdldERhdGEoJHNjb3BlLmVsZWN0aW9uS2luZC51cmwsICdXYXJzemF3YScpO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIGRlcyA9ICRyb290U2NvcGUuJG9uKCdhcmVhOjphcmVhVHlwZUNoYW5nZScsIGZ1bmN0aW9uKGUsIHVybCwgbmFtZSl7XG4gICAgZ2V0RGF0YSh1cmwsIG5hbWUpXG4gIH0pO1xuICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGRlcyk7XG5cbiAgJHNjb3BlLm1lbnVJc1Zpc2libGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJHNjb3BlLm9wZW5NZW51ID09PSBmYWxzZSB8fCAkc2NvcGUub3Blbk1lbnUgPT09IHRydWU7XG4gIH07XG4gICRzY29wZS5tZW51SXNPZmYgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJHNjb3BlLm9wZW5NZW51ID09PSBmYWxzZTtcbiAgfTtcbiAgXG4gICRzY29wZS5kcm9wZG93bklzT2ZmID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICRzY29wZS5lbGVjdGlvbktpbmRzRHJvcHduID09PSBmYWxzZTtcbiAgfTtcblxuICAkc2NvcGUuZHJvcGRvd25Jc1Zpc2libGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJHNjb3BlLmVsZWN0aW9uS2luZHNEcm9wd24gPT09IGZhbHNlIHx8ICRzY29wZS5lbGVjdGlvbktpbmRzRHJvcHduID09PSB0cnVlO1xuICB9O1xuXG4gICRzY29wZS5jaGFuZ2VFbGVjdGlvbktpbmQgPSBmdW5jdGlvbihraW5kKSB7XG4gICAgJHNjb3BlLmRhdGFVcmwgPSBraW5kLnVybDtcbiAgICAkc2NvcGUuZWxlY3Rpb25LaW5kID0ge1xuICAgICAgbmFtZToga2luZC5uYW1lLFxuICAgICAgdHlwZToga2luZC50eXBlLFxuICAgICAgdXJsOiBraW5kLnVybFxuICAgIH07XG4gICAgaHR0cFNlcnZpY2UuZ2V0U3RhdHNEYXRhKGtpbmQudXJsKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgJHNjb3BlLnN0YXRzRGF0YSA9IGRhdGE7XG4gICAgfSlcbiAgICB1cmxzLmNoYW5nZURhdGFVcmwoa2luZC51cmwsICdzdGF0cycpO1xuICAgICRzY29wZS5lbGVjdGlvbktpbmRzRHJvcHduID0gZmFsc2U7XG4gIH07XG4gIFxuXG4gIFxuICBcbn1dKTsiLCIndXNlIHN0cmljdCc7XG5hbmd1bGFyLm1vZHVsZSgnd3lib3J5U2FtMjAxNC5jaGFydHMnLCBbXSkiLCIndXNlIHN0cmljdCc7XG5hbmd1bGFyLm1vZHVsZSgnd3lib3J5U2FtMjAxNC5odHRwJywgW10pIiwiYW5ndWxhci5tb2R1bGUoJ3d5Ym9yeVNhbTIwMTQuaHR0cCcpXG4uZmFjdG9yeSgnaHR0cFNlcnZpY2UnLCBbJyRodHRwJywgJ0RFVl9BUElfUFJFRklYJywgZnVuY3Rpb24oJGh0dHAsIERFVl9BUElfUFJFRklYKSB7XG4gIHZhciBzZWxmID0ge307XG4gIFxuICBzZWxmLmdldEFyZWFzVHJlZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAkaHR0cC5nZXQoREVWX0FQSV9QUkVGSVggKyAnc3RhdHMvYXJlYXMtdHJlZS8nKTtcbiAgfTtcblxuICBzZWxmLmdldFN0YXRzRGF0YSA9IGZ1bmN0aW9uKHVybCkge1xuICAgIHJldHVybiAkaHR0cC5nZXQoREVWX0FQSV9QUkVGSVggKyB1cmwpO1xuICB9IFxuXG4gIHJldHVybiBzZWxmO1xufV0pIiwiJ3VzZSBzdHJpY3QnO1xuYW5ndWxhci5tb2R1bGUoJ3d5Ym9yeVNhbTIwMTQudGFibGVzJywgW10pIiwiJ3VzZSBzdHJpY3QnO1xuYW5ndWxhci5tb2R1bGUoJ3d5Ym9yeVNhbTIwMTQudXRpbHMnLCBbXSkiLCIndXNlIHN0cmljdCc7XG5hbmd1bGFyLm1vZHVsZSgnd3lib3J5U2FtMjAxNC51dGlscycpXG4uZmFjdG9yeSgndXJscycsIFsnJGxvY2F0aW9uJywgZnVuY3Rpb24oJGxvY2F0aW9uKXtcbiAgdmFyIHNlbGYgPSB7fTtcbiAgXG4gIHNlbGYuY29kZSA9IGZ1bmN0aW9uKHVybCkge1xuICAgIHJldHVybiB1cmwucmVwbGFjZSgvXFwvL2csICcuJyk7XG4gIH07XG4gIFxuICBzZWxmLmRlY29kZSA9IGZ1bmN0aW9uKHVybCkge1xuICAgIHJldHVybiB1cmwucmVwbGFjZSgvXFwuL2csICcvJyk7XG4gIH07XG5cbiAgc2VsZi5nZXRTaXRlTmFtZSA9IGZ1bmN0aW9uKHVybCwgc3BsaXRVcmxQYXJhbSkge1xuICAgIGlmKHVybCkge1xuICAgICAgdmFyIHVybHNBcnIgPSB1cmwuc3BsaXQoc3BsaXRVcmxQYXJhbSB8fCAnLycpO1xuICAgICAgdmFyIGRhdGFUeXBlID0gdXJsc0Fyclt1cmxzQXJyLmxlbmd0aCAtIDJdLnNwbGl0KCctJyk7ICBcbiAgICB9XG5cbiAgICBpZih1cmwgJiYgZGF0YVR5cGVbMF0gPT09ICdjaXJjbGUnKSB7XG4gICAgICByZXR1cm4gJ09rcsSZZyBuciAnICsgZGF0YVR5cGVbMV07XG4gICAgfVxuICAgIGVsc2UgaWYodXJsICYmIGRhdGFUeXBlWzBdID09PSAnY2lyY3VpdCcpIHtcbiAgICAgIHJldHVybiAnT2J3w7NkIG5yICcgKyAgZGF0YVR5cGVbMV07XG4gICAgfVxuICAgIGVsc2UgaWYodXJsICYmIGRhdGFUeXBlWzBdID09PSAnZGlzdHJpY3QnKSB7XG4gICAgICByZXR1cm4gZGF0YVR5cGVbMV07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuICdXYXJzemF3YSc7XG4gICAgfVxuICB9O1xuXG4gIHNlbGYuZ2V0RWxlY3Rpb25LaW5kID0gZnVuY3Rpb24odHJlZSwgdXJsLCBzcGxpdFVybFBhcmFtKSB7XG4gICAgaWYoIXVybCB8fCAhdHJlZSkge1xuICAgICAgcmV0dXJuIHsgLy9kZWZhdWx0IGRhdGFcbiAgICAgICAgbmFtZTogJ1d5Ym9yeSBkbyBSYWR5IE1pYXN0YScsXG4gICAgICAgIHR5cGU6ICdjaXR5X2NvdW5jaWwnLFxuICAgICAgICB1cmw6ICdzdGF0cy9jaXR5X2NvdW5jaWwvJ1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciB0eXBlID0gdXJsLnNwbGl0KHNwbGl0VXJsUGFyYW0gfHwgJy8nKVsxXTtcbiAgICB2YXIgbm9kZSA9IHRyZWUuZmlsdGVyKGZ1bmN0aW9uKG9iail7XG4gICAgICByZXR1cm4gb2JqLnR5cGUgPT09IHR5cGU7XG4gICAgfSlbMF07XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IG5vZGUubmFtZSxcbiAgICAgIHR5cGU6IG5vZGUudHlwZSxcbiAgICAgIHVybDogbm9kZS51cmxcbiAgICB9O1xuICB9XG5cbiAgc2VsZi5jaGFuZ2VEYXRhVXJsID0gZnVuY3Rpb24odXJsLCBTdGF0ZVBhcmFtRGF0YVVybCwgc2l0ZVR5cGUpIHtcbiAgICBcbiAgICB2YXIgZGF0YVVybCA9ICRsb2NhdGlvbi5wYXRoKCkuc3BsaXQoJy8nKTtcbiAgICBcbiAgICAvL2l0IGlzIGRhbmdlcm91cyBidXQgbm93IHdvcmtzIFxuICAgIGRhdGFVcmwucG9wKCk7XG4gICAgXG4gICAgZGF0YVVybC5wdXNoKHNlbGYuY29kZSh1cmwpKTtcbiAgICAkbG9jYXRpb24ucGF0aChkYXRhVXJsLmpvaW4oJy8nKSk7XG4gIH1cblxuICByZXR1cm4gc2VsZjtcbn1dKSIsIid1c2Ugc3RyaWN0JztcbmFuZ3VsYXIubW9kdWxlKCd3eWJvcnlTYW0yMDE0LmFyZWEnKVxuLmRpcmVjdGl2ZSgnbWFpbkNpdHknLCBbJyRyb290U2NvcGUnLCBmdW5jdGlvbigkcm9vdFNjb3BlKXtcbiAgcmV0dXJuIHtcbiAgICBzY29wZToge1xuICAgICAgZWxlY3Rpb246XCI9XCJcbiAgICB9LCAvLyB7fSA9IGlzb2xhdGUsIHRydWUgPSBjaGlsZCwgZmFsc2UvdW5kZWZpbmVkID0gbm8gY2hhbmdlXG4gICAgcmVzdHJpY3Q6ICdFJywgLy8gRSA9IEVsZW1lbnQsIEEgPSBBdHRyaWJ1dGUsIEMgPSBDbGFzcywgTSA9IENvbW1lbnRcbiAgICB0ZW1wbGF0ZVVybDogJ2FyZWEvdHJlZS9tYWluLWNpdHkuZGlyLmh0bWwnLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBpRWxtLCBpQXR0cnMsIGNvbnRyb2xsZXIpIHtcbiAgICAgIHNjb3BlLmRlYWN0aXZhdGVBbGxCcmFuY2hlcyA9IGZ1bmN0aW9uKGV2ZW50LCBlbGVtZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3RyZWUuY2l0eTo6ZGVhY3RpdmF0ZUFsbEJyYW5jaGVzJykgXG4gICAgICB9XG5cbiAgICAgIHNjb3BlLmNoYW5nZUFyZWEgPSBmdW5jdGlvbihldmVudCwgZWxlbWVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdhcmVhOjphcmVhVHlwZUNoYW5nZScsIGVsZW1lbnQudXJsLCBlbGVtZW50Lm5hbWUpO1xuICAgICAgfTsgIFxuICAgIH1cbiAgfTtcbn1dKTsiLCIndXNlIHN0cmljdCc7XG5hbmd1bGFyLm1vZHVsZSgnd3lib3J5U2FtMjAxNC5hcmVhJylcbi5kaXJlY3RpdmUoJ2FyZWFzVHJlZScsIFsnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCRyb290U2NvcGUpe1xuICByZXR1cm4ge1xuICAgIHNjb3BlOiB7XG4gICAgICB0cmVlOlwiPVwiXG4gICAgfSwgLy8ge30gPSBpc29sYXRlLCB0cnVlID0gY2hpbGQsIGZhbHNlL3VuZGVmaW5lZCA9IG5vIGNoYW5nZVxuICAgIHJlc3RyaWN0OiAnRScsIC8vIEUgPSBFbGVtZW50LCBBID0gQXR0cmlidXRlLCBDID0gQ2xhc3MsIE0gPSBDb21tZW50XG4gICAgdGVtcGxhdGVVcmw6ICdhcmVhL3RyZWUvdHJlZS5kaXIuaHRtbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGlFbG0sIGlBdHRycywgY29udHJvbGxlcikge1xuICAgICAgc2NvcGUuYWN0aXZlID0gLTE7XG4gICAgICBzY29wZS5hY3RpdmF0ZURlYWN0aXZhdGUgPSBmdW5jdGlvbihldmVudCwgaW5kZXgpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGlmKHNjb3BlLmFjdGl2ZSA9PT0gLTEpIHtcbiAgICAgICAgICBzY29wZS5hY3RpdmUgPSBpbmRleDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2NvcGUuYWN0aXZlID0gLTE7XG4gICAgICB9O1xuXG4gICAgICB2YXIgZGVzID0gJHJvb3RTY29wZS4kb24oJ2FyZWE6OmVsZWN0aW9uVHlwZUNoYW5nZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHNjb3BlLmFjdGl2ZSA9IC0xO1xuICAgICAgfSk7XG4gICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZGVzKTtcbiAgICAgIFxuICAgICAgdmFyIGRlczEgPSAkcm9vdFNjb3BlLiRvbigndHJlZS5jaXR5OjpkZWFjdGl2YXRlQWxsQnJhbmNoZXMnLCBmdW5jdGlvbigpe1xuICAgICAgICBzY29wZS5hY3RpdmUgPSAtMTtcbiAgICAgIH0pO1xuICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGRlczEpO1xuXG4gICAgICBzY29wZS5jaGFuZ2VBcmVhID0gZnVuY3Rpb24oZXZlbnQsIGVsZW1lbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnYXJlYTo6YXJlYVR5cGVDaGFuZ2UnLCBlbGVtZW50LnVybCwgZWxlbWVudC5uYW1lKTtcbiAgICAgIH07XG5cbiAgICAgIFxuICAgIH1cbiAgfTtcbn1dKTsiLCIndXNlIHN0cmljdCc7XG5hbmd1bGFyLm1vZHVsZSgnd3lib3J5U2FtMjAxNC5jaGFydHMnKVxuLmNvbnRyb2xsZXIoJ3d5Ym9yeVNhbTIwMTQuY2hhcnRzLm1haW5DdHJsJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgXG4gICRzY29wZS5vcHRpb25zID0ge1xuICAgIGNoYXJ0OiB7XG4gICAgICB0eXBlOiAnZGlzY3JldGVCYXJDaGFydCcsXG4gICAgICBoZWlnaHQ6IDQwMCxcbiAgICAgIG1hcmdpbiA6IHtcbiAgICAgICAgdG9wOiAyMCxcbiAgICAgICAgcmlnaHQ6IDQwLFxuICAgICAgICBib3R0b206IDUwLFxuICAgICAgICBsZWZ0OiA1NVxuICAgICAgfSxcbiAgICAgIHg6IGZ1bmN0aW9uKGQpe3JldHVybiBkLmxhYmVsO30sXG4gICAgICB5OiBmdW5jdGlvbihkKXtyZXR1cm4gZC52YWx1ZTt9LFxuICAgICAgc2hvd1ZhbHVlczogZmFsc2UsXG4gICAgICB2YWx1ZUZvcm1hdDogZnVuY3Rpb24oZCl7XG4gICAgICAgIHJldHVybiBkMy5mb3JtYXQoJywuMmYlJykoZCk7XG4gICAgICB9LFxuICAgICAgZHVyYXRpb246IDUwMCxcbiAgICAgIHhBeGlzOiB7XG4gICAgICAgIC8vIGF4aXNMYWJlbDogJ1ggQXhpcydcbiAgICAgIH0sXG4gICAgICB5QXhpczoge1xuICAgICAgICAvLyBheGlzTGFiZWw6ICdZIEF4aXMnLFxuICAgICAgICBheGlzTGFiZWxEaXN0YW5jZTogMFxuICAgICAgfSxcbiAgICB9XG4gIH07XG59XSkiLCIndXNlIHN0cmljdCc7XG5hbmd1bGFyLm1vZHVsZSgnd3lib3J5U2FtMjAxNC5jaGFydHMnKVxuLmRpcmVjdGl2ZSgnY2hhcnRzVmlldycsIFtmdW5jdGlvbigpe1xuICAvLyBSdW5zIGR1cmluZyBjb21waWxlXG4gIHJldHVybiB7XG4gICAgc2NvcGU6IHtcbiAgICAgIGRhdGE6ICc9J1xuICAgIH0sIC8vIHt9ID0gaXNvbGF0ZSwgdHJ1ZSA9IGNoaWxkLCBmYWxzZS91bmRlZmluZWQgPSBubyBjaGFuZ2VcbiAgICBjb250cm9sbGVyOiAnd3lib3J5U2FtMjAxNC5jaGFydHMubWFpbkN0cmwnLFxuICAgIHJlc3RyaWN0OiAnRScsIC8vIEUgPSBFbGVtZW50LCBBID0gQXR0cmlidXRlLCBDID0gQ2xhc3MsIE0gPSBDb21tZW50XG4gICAgdGVtcGxhdGVVcmw6ICdjaGFydHMvbWFpbi9jaGFydHMuZGlyLmh0bWwnLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBpRWxtLCBpQXR0cnMsIGNvbnRyb2xsZXIpIHtcbiAgICAgIHNjb3BlLmNoYXJ0RGF0YSA9IFt7a2V5OiBcIkN1bXVsYXRpdmUgUmV0dXJuXCIsIHZhbHVlczogW119XVxuICAgICAgc2NvcGUuJHdhdGNoKCdkYXRhJywgZnVuY3Rpb24odmFsLCBvbGRWYWwpIHtcbiAgICAgICAgaWYodmFsICE9PSBvbGRWYWwpIHtcbiAgICAgICAgICBzY29wZS5jaGFydERhdGFbMF0udmFsdWVzID0gXy5tYXAodmFsLnZvdGVzLGZ1bmN0aW9uKHYpe1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgdmFsdWU6IHYucGVyY2VudGFnZSxcbiAgICAgICAgICAgICAgbGFiZWw6IHYucG9saXRpY2FsX3BhcnR5XG4gICAgICAgICAgfX0pXG4gICAgICAgICAgc2NvcGUuY2hhcnREYXRhWzBdLnZhbHVlcy5zb3J0KGZ1bmN0aW9uKGEsIGIpe1xuICAgICAgICAgICAgcmV0dXJuIGIudmFsdWUgLSBhLnZhbHVlO1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dKTsiLCIndXNlIHN0cmljdCc7XG5hbmd1bGFyLm1vZHVsZSgnd3lib3J5U2FtMjAxNC50YWJsZXMnKVxuLmNvbnRyb2xsZXIoJ3d5Ym9yeVNhbTIwMTQudGFibGVzLm1haW5DdHJsJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpe1xuICAkc2NvcGUucm93Q29sbGVjdGlvbiA9IFtcbiAgICB7Zmlyc3ROYW1lOiAnTGF1cmVudCcsIGxhc3ROYW1lOiAnUmVuYXJkJywgYmlydGhEYXRlOiBuZXcgRGF0ZSgnMTk4Ny0wNS0yMScpLCBiYWxhbmNlOiAxMDIsIGVtYWlsOiAnd2hhdGV2ZXJAZ21haWwuY29tJ30sXG4gICAge2ZpcnN0TmFtZTogJ0JsYW5kaW5lJywgbGFzdE5hbWU6ICdGYWl2cmUnLCBiaXJ0aERhdGU6IG5ldyBEYXRlKCcxOTg3LTA0LTI1JyksIGJhbGFuY2U6IC0yMzIzLjIyLCBlbWFpbDogJ291ZmJsYW5kb3VAZ21haWwuY29tJ30sXG4gICAge2ZpcnN0TmFtZTogJ0ZyYW5jb2lzZScsIGxhc3ROYW1lOiAnRnJlcmUnLCBiaXJ0aERhdGU6IG5ldyBEYXRlKCcxOTU1LTA4LTI3JyksIGJhbGFuY2U6IDQyMzQzLCBlbWFpbDogJ3JheW1vbmRlZkBnbWFpbC5jb20nfVxuICBdO1xufV0pIiwiJ3VzZSBzdHJpY3QnO1xuYW5ndWxhci5tb2R1bGUoJ3d5Ym9yeVNhbTIwMTQudGFibGVzJylcbi5kaXJlY3RpdmUoJ3RhYmxlc1ZpZXcnLCBbZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHtcbiAgICBzY29wZToge1xuICAgICAgc3RhdHM6IFwiPVwiLFxuICAgICAgZWxlY3Rpb25LaW5kOiBcIj1cIlxuICAgICAgfSwgLy8ge30gPSBpc29sYXRlLCB0cnVlID0gY2hpbGQsIGZhbHNlL3VuZGVmaW5lZCA9IG5vIGNoYW5nZVxuICAgIGNvbnRyb2xsZXI6ICd3eWJvcnlTYW0yMDE0LnRhYmxlcy5tYWluQ3RybCcsXG4gICAgcmVzdHJpY3Q6ICdFJywgLy8gRSA9IEVsZW1lbnQsIEEgPSBBdHRyaWJ1dGUsIEMgPSBDbGFzcywgTSA9IENvbW1lbnQsXG4gICAgdGVtcGxhdGVVcmw6ICd0YWJsZXMvbWFpbi90YWJsZXMuZGlyLmh0bWwnLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBpRWxtLCBpQXR0cnMsIGNvbnRyb2xsZXIpIHtcbiAgICAgIC8vIHNjb3BlLmNhbmRpZGF0ZXNUYWJsZUxpbWl0ID0gMzA7XG4gICAgfVxuICB9O1xufV0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
